{
  "url": "https://fastapi.tiangolo.com/how-to/separate-openapi-schemas/",
  "title": "Separate OpenAPI Schemas for Input and Output or NotÂ¶",
  "content": "When using Pydantic v2, the generated OpenAPI is a bit more exact and correct than before. ðŸ˜Ž\n\nIn fact, in some cases, it will even have two JSON Schemas in OpenAPI for the same Pydantic model, for input and output, depending on if they have default values.\n\nLet's see how that works and how to change it if you need to do that.\n\nLet's say you have a Pydantic model with default values, like this one:\n\nIf you use this model as an input like here:\n\n...then the description field will not be required. Because it has a default value of None.\n\nYou can confirm that in the docs, the description field doesn't have a red asterisk, it's not marked as required:\n\nBut if you use the same model as an output, like here:\n\n...then because description has a default value, if you don't return anything for that field, it will still have that default value.\n\nIf you interact with the docs and check the response, even though the code didn't add anything in one of the description fields, the JSON response contains the default value (null):\n\nThis means that it will always have a value, it's just that sometimes the value could be None (or null in JSON).\n\nThat means that, clients using your API don't have to check if the value exists or not, they can assume the field will always be there, but just that in some cases it will have the default value of None.\n\nThe way to describe this in OpenAPI, is to mark that field as required, because it will always be there.\n\nBecause of that, the JSON Schema for a model can be different depending on if it's used for input or output:\n\nYou can check the output model in the docs too, both name and description are marked as required with a red asterisk:\n\nAnd if you check all the available Schemas (JSON Schemas) in OpenAPI, you will see that there are two, one Item-Input and one Item-Output.\n\nFor Item-Input, description is not required, it doesn't have a red asterisk.\n\nBut for Item-Output, description is required, it has a red asterisk.\n\nWith this feature from Pydantic v2, your API documentation is more precise, and if you have autogenerated clients and SDKs, they will be more precise too, with a better developer experience and consistency. ðŸŽ‰\n\nNow, there are some cases where you might want to have the same schema for input and output.\n\nProbably the main use case for this is if you already have some autogenerated client code/SDKs and you don't want to update all the autogenerated client code/SDKs yet, you probably will want to do it at some point, but maybe not right now.\n\nIn that case, you can disable this feature in FastAPI, with the parameter separate_input_output_schemas=False.\n\nSupport for separate_input_output_schemas was added in FastAPI 0.102.0. ðŸ¤“\n\nAnd now there will be one single schema for input and output for the model, only Item, and it will have description as not required:\n\nThis is the same behavior as in Pydantic v1. ðŸ¤“",
  "headings": [
    {
      "level": "h1",
      "text": "Separate OpenAPI Schemas for Input and Output or NotÂ¶",
      "id": "separate-openapi-schemas-for-input-and-output-or-not"
    },
    {
      "level": "h2",
      "text": "Pydantic Models for Input and OutputÂ¶",
      "id": "pydantic-models-for-input-and-output"
    },
    {
      "level": "h3",
      "text": "Model for InputÂ¶",
      "id": "model-for-input"
    },
    {
      "level": "h3",
      "text": "Input Model in DocsÂ¶",
      "id": "input-model-in-docs"
    },
    {
      "level": "h3",
      "text": "Model for OutputÂ¶",
      "id": "model-for-output"
    },
    {
      "level": "h3",
      "text": "Model for Output Response DataÂ¶",
      "id": "model-for-output-response-data"
    },
    {
      "level": "h3",
      "text": "Model for Output in DocsÂ¶",
      "id": "model-for-output-in-docs"
    },
    {
      "level": "h3",
      "text": "Model for Input and Output in DocsÂ¶",
      "id": "model-for-input-and-output-in-docs"
    },
    {
      "level": "h2",
      "text": "Do not Separate SchemasÂ¶",
      "id": "do-not-separate-schemas"
    },
    {
      "level": "h3",
      "text": "Same Schema for Input and Output Models in DocsÂ¶",
      "id": "same-schema-for-input-and-output-models-in-docs"
    }
  ],
  "code_samples": [
    {
      "code": "from fastapi import FastAPI\nfrom pydantic import BaseModel\n\n\nclass Item(BaseModel):\n    name: str\n    description: str | None = None\n\n# Code below omitted ðŸ‘‡",
      "language": "python"
    },
    {
      "code": "from fastapi import FastAPI\nfrom pydantic import BaseModel\n\n\nclass Item(BaseModel):\n    name: str\n    description: str | None = None\n\n\napp = FastAPI()\n\n\n@app.post(\"/items/\")\ndef create_item(item: Item):\n    return item\n\n\n@app.get(\"/items/\")\ndef read_items() -> list[Item]:\n    return [\n        Item(\n            name=\"Portal Gun\",\n            description=\"Device to travel through the multi-rick-verse\",\n        ),\n        Item(name=\"Plumbus\"),\n    ]",
      "language": "python"
    },
    {
      "code": "from typing import Optional\n\nfrom fastapi import FastAPI\nfrom pydantic import BaseModel\n\n\nclass Item(BaseModel):\n    name: str\n    description: Optional[str] = None\n\n\napp = FastAPI()\n\n\n@app.post(\"/items/\")\ndef create_item(item: Item):\n    return item\n\n\n@app.get(\"/items/\")\ndef read_items() -> list[Item]:\n    return [\n        Item(\n            name=\"Portal Gun\",\n            description=\"Device to travel through the multi-rick-verse\",\n        ),\n        Item(name=\"Plumbus\"),\n    ]",
      "language": "python"
    },
    {
      "code": "from typing import List, Union\n\nfrom fastapi import FastAPI\nfrom pydantic import BaseModel\n\n\nclass Item(BaseModel):\n    name: str\n    description: Union[str, None] = None\n\n\napp = FastAPI()\n\n\n@app.post(\"/items/\")\ndef create_item(item: Item):\n    return item\n\n\n@app.get(\"/items/\")\ndef read_items() -> List[Item]:\n    return [\n        Item(\n            name=\"Portal Gun\",\n            description=\"Device to travel through the multi-rick-verse\",\n        ),\n        Item(name=\"Plumbus\"),\n    ]",
      "language": "python"
    },
    {
      "code": "from fastapi import FastAPI\nfrom pydantic import BaseModel\n\n\nclass Item(BaseModel):\n    name: str\n    description: str | None = None\n\n\napp = FastAPI()\n\n\n@app.post(\"/items/\")\ndef create_item(item: Item):\n    return item\n\n# Code below omitted ðŸ‘‡",
      "language": "python"
    },
    {
      "code": "from fastapi import FastAPI\nfrom pydantic import BaseModel\n\n\nclass Item(BaseModel):\n    name: str\n    description: str | None = None\n\n\napp = FastAPI()\n\n\n@app.post(\"/items/\")\ndef create_item(item: Item):\n    return item\n\n\n@app.get(\"/items/\")\ndef read_items() -> list[Item]:\n    return [\n        Item(\n            name=\"Portal Gun\",\n            description=\"Device to travel through the multi-rick-verse\",\n        ),\n        Item(name=\"Plumbus\"),\n    ]",
      "language": "python"
    },
    {
      "code": "from typing import Optional\n\nfrom fastapi import FastAPI\nfrom pydantic import BaseModel\n\n\nclass Item(BaseModel):\n    name: str\n    description: Optional[str] = None\n\n\napp = FastAPI()\n\n\n@app.post(\"/items/\")\ndef create_item(item: Item):\n    return item\n\n\n@app.get(\"/items/\")\ndef read_items() -> list[Item]:\n    return [\n        Item(\n            name=\"Portal Gun\",\n            description=\"Device to travel through the multi-rick-verse\",\n        ),\n        Item(name=\"Plumbus\"),\n    ]",
      "language": "python"
    },
    {
      "code": "from typing import List, Union\n\nfrom fastapi import FastAPI\nfrom pydantic import BaseModel\n\n\nclass Item(BaseModel):\n    name: str\n    description: Union[str, None] = None\n\n\napp = FastAPI()\n\n\n@app.post(\"/items/\")\ndef create_item(item: Item):\n    return item\n\n\n@app.get(\"/items/\")\ndef read_items() -> List[Item]:\n    return [\n        Item(\n            name=\"Portal Gun\",\n            description=\"Device to travel through the multi-rick-verse\",\n        ),\n        Item(name=\"Plumbus\"),\n    ]",
      "language": "python"
    },
    {
      "code": "from fastapi import FastAPI\nfrom pydantic import BaseModel\n\n\nclass Item(BaseModel):\n    name: str\n    description: str | None = None\n\n\napp = FastAPI()\n\n\n@app.post(\"/items/\")\ndef create_item(item: Item):\n    return item\n\n\n@app.get(\"/items/\")\ndef read_items() -> list[Item]:\n    return [\n        Item(\n            name=\"Portal Gun\",\n            description=\"Device to travel through the multi-rick-verse\",\n        ),\n        Item(name=\"Plumbus\"),\n    ]",
      "language": "python"
    },
    {
      "code": "from typing import Optional\n\nfrom fastapi import FastAPI\nfrom pydantic import BaseModel\n\n\nclass Item(BaseModel):\n    name: str\n    description: Optional[str] = None\n\n\napp = FastAPI()\n\n\n@app.post(\"/items/\")\ndef create_item(item: Item):\n    return item\n\n\n@app.get(\"/items/\")\ndef read_items() -> list[Item]:\n    return [\n        Item(\n            name=\"Portal Gun\",\n            description=\"Device to travel through the multi-rick-verse\",\n        ),\n        Item(name=\"Plumbus\"),\n    ]",
      "language": "python"
    },
    {
      "code": "from typing import List, Union\n\nfrom fastapi import FastAPI\nfrom pydantic import BaseModel\n\n\nclass Item(BaseModel):\n    name: str\n    description: Union[str, None] = None\n\n\napp = FastAPI()\n\n\n@app.post(\"/items/\")\ndef create_item(item: Item):\n    return item\n\n\n@app.get(\"/items/\")\ndef read_items() -> List[Item]:\n    return [\n        Item(\n            name=\"Portal Gun\",\n            description=\"Device to travel through the multi-rick-verse\",\n        ),\n        Item(name=\"Plumbus\"),\n    ]",
      "language": "python"
    },
    {
      "code": "from fastapi import FastAPI\nfrom pydantic import BaseModel\n\n\nclass Item(BaseModel):\n    name: str\n    description: str | None = None\n\n\napp = FastAPI(separate_input_output_schemas=False)\n\n\n@app.post(\"/items/\")\ndef create_item(item: Item):\n    return item\n\n\n@app.get(\"/items/\")\ndef read_items() -> list[Item]:\n    return [\n        Item(\n            name=\"Portal Gun\",\n            description=\"Device to travel through the multi-rick-verse\",\n        ),\n        Item(name=\"Plumbus\"),\n    ]",
      "language": "python"
    },
    {
      "code": "from typing import Optional\n\nfrom fastapi import FastAPI\nfrom pydantic import BaseModel\n\n\nclass Item(BaseModel):\n    name: str\n    description: Optional[str] = None\n\n\napp = FastAPI(separate_input_output_schemas=False)\n\n\n@app.post(\"/items/\")\ndef create_item(item: Item):\n    return item\n\n\n@app.get(\"/items/\")\ndef read_items() -> list[Item]:\n    return [\n        Item(\n            name=\"Portal Gun\",\n            description=\"Device to travel through the multi-rick-verse\",\n        ),\n        Item(name=\"Plumbus\"),\n    ]",
      "language": "python"
    },
    {
      "code": "from typing import List, Union\n\nfrom fastapi import FastAPI\nfrom pydantic import BaseModel\n\n\nclass Item(BaseModel):\n    name: str\n    description: Union[str, None] = None\n\n\napp = FastAPI(separate_input_output_schemas=False)\n\n\n@app.post(\"/items/\")\ndef create_item(item: Item):\n    return item\n\n\n@app.get(\"/items/\")\ndef read_items() -> List[Item]:\n    return [\n        Item(\n            name=\"Portal Gun\",\n            description=\"Device to travel through the multi-rick-verse\",\n        ),\n        Item(name=\"Plumbus\"),\n    ]",
      "language": "python"
    }
  ],
  "patterns": [],
  "links": [
    "https://fastapi.tiangolo.com/how-to/separate-openapi-schemas/"
  ]
}