{
  "url": "https://fastapi.tiangolo.com/tutorial/header-param-models/",
  "title": "Header Parameter ModelsÂ¶",
  "content": "If you have a group of related header parameters, you can create a Pydantic model to declare them.\n\nThis would allow you to re-use the model in multiple places and also to declare validations and metadata for all the parameters at once. ðŸ˜Ž\n\nThis is supported since FastAPI version 0.115.0. ðŸ¤“\n\nDeclare the header parameters that you need in a Pydantic model, and then declare the parameter as Header:\n\nPrefer to use the Annotated version if possible.\n\nPrefer to use the Annotated version if possible.\n\nPrefer to use the Annotated version if possible.\n\nFastAPI will extract the data for each field from the headers in the request and give you the Pydantic model you defined.\n\nYou can see the required headers in the docs UI at /docs:\n\nIn some special use cases (probably not very common), you might want to restrict the headers that you want to receive.\n\nYou can use Pydantic's model configuration to forbid any extra fields:\n\nPrefer to use the Annotated version if possible.\n\nPrefer to use the Annotated version if possible.\n\nPrefer to use the Annotated version if possible.\n\nIf a client tries to send some extra headers, they will receive an error response.\n\nFor example, if the client tries to send a tool header with a value of plumbus, they will receive an error response telling them that the header parameter tool is not allowed:\n\nThe same way as with regular header parameters, when you have underscore characters in the parameter names, they are automatically converted to hyphens.\n\nFor example, if you have a header parameter save_data in the code, the expected HTTP header will be save-data, and it will show up like that in the docs.\n\nIf for some reason you need to disable this automatic conversion, you can do it as well for Pydantic models for header parameters.\n\nPrefer to use the Annotated version if possible.\n\nPrefer to use the Annotated version if possible.\n\nPrefer to use the Annotated version if possible.\n\nBefore setting convert_underscores to False, bear in mind that some HTTP proxies and servers disallow the usage of headers with underscores.\n\nYou can use Pydantic models to declare headers in FastAPI. ðŸ˜Ž",
  "headings": [
    {
      "level": "h1",
      "text": "Header Parameter ModelsÂ¶",
      "id": "header-parameter-models"
    },
    {
      "level": "h2",
      "text": "Header Parameters with a Pydantic ModelÂ¶",
      "id": "header-parameters-with-a-pydantic-model"
    },
    {
      "level": "h2",
      "text": "Check the DocsÂ¶",
      "id": "check-the-docs"
    },
    {
      "level": "h2",
      "text": "Forbid Extra HeadersÂ¶",
      "id": "forbid-extra-headers"
    },
    {
      "level": "h2",
      "text": "Disable Convert UnderscoresÂ¶",
      "id": "disable-convert-underscores"
    },
    {
      "level": "h2",
      "text": "SummaryÂ¶",
      "id": "summary"
    }
  ],
  "code_samples": [
    {
      "code": "from typing import Annotated\n\nfrom fastapi import FastAPI, Header\nfrom pydantic import BaseModel\n\napp = FastAPI()\n\n\nclass CommonHeaders(BaseModel):\n    host: str\n    save_data: bool\n    if_modified_since: str | None = None\n    traceparent: str | None = None\n    x_tag: list[str] = []\n\n\n@app.get(\"/items/\")\nasync def read_items(headers: Annotated[CommonHeaders, Header()]):\n    return headers",
      "language": "python"
    },
    {
      "code": "from typing import Annotated, Union\n\nfrom fastapi import FastAPI, Header\nfrom pydantic import BaseModel\n\napp = FastAPI()\n\n\nclass CommonHeaders(BaseModel):\n    host: str\n    save_data: bool\n    if_modified_since: Union[str, None] = None\n    traceparent: Union[str, None] = None\n    x_tag: list[str] = []\n\n\n@app.get(\"/items/\")\nasync def read_items(headers: Annotated[CommonHeaders, Header()]):\n    return headers",
      "language": "python"
    },
    {
      "code": "from typing import List, Union\n\nfrom fastapi import FastAPI, Header\nfrom pydantic import BaseModel\nfrom typing_extensions import Annotated\n\napp = FastAPI()\n\n\nclass CommonHeaders(BaseModel):\n    host: str\n    save_data: bool\n    if_modified_since: Union[str, None] = None\n    traceparent: Union[str, None] = None\n    x_tag: List[str] = []\n\n\n@app.get(\"/items/\")\nasync def read_items(headers: Annotated[CommonHeaders, Header()]):\n    return headers",
      "language": "python"
    },
    {
      "code": "from fastapi import FastAPI, Header\nfrom pydantic import BaseModel\n\napp = FastAPI()\n\n\nclass CommonHeaders(BaseModel):\n    host: str\n    save_data: bool\n    if_modified_since: str | None = None\n    traceparent: str | None = None\n    x_tag: list[str] = []\n\n\n@app.get(\"/items/\")\nasync def read_items(headers: CommonHeaders = Header()):\n    return headers",
      "language": "python"
    },
    {
      "code": "from typing import Union\n\nfrom fastapi import FastAPI, Header\nfrom pydantic import BaseModel\n\napp = FastAPI()\n\n\nclass CommonHeaders(BaseModel):\n    host: str\n    save_data: bool\n    if_modified_since: Union[str, None] = None\n    traceparent: Union[str, None] = None\n    x_tag: list[str] = []\n\n\n@app.get(\"/items/\")\nasync def read_items(headers: CommonHeaders = Header()):\n    return headers",
      "language": "python"
    },
    {
      "code": "from typing import List, Union\n\nfrom fastapi import FastAPI, Header\nfrom pydantic import BaseModel\n\napp = FastAPI()\n\n\nclass CommonHeaders(BaseModel):\n    host: str\n    save_data: bool\n    if_modified_since: Union[str, None] = None\n    traceparent: Union[str, None] = None\n    x_tag: List[str] = []\n\n\n@app.get(\"/items/\")\nasync def read_items(headers: CommonHeaders = Header()):\n    return headers",
      "language": "python"
    },
    {
      "code": "from typing import Annotated\n\nfrom fastapi import FastAPI, Header\nfrom pydantic import BaseModel\n\napp = FastAPI()\n\n\nclass CommonHeaders(BaseModel):\n    model_config = {\"extra\": \"forbid\"}\n\n    host: str\n    save_data: bool\n    if_modified_since: str | None = None\n    traceparent: str | None = None\n    x_tag: list[str] = []\n\n\n@app.get(\"/items/\")\nasync def read_items(headers: Annotated[CommonHeaders, Header()]):\n    return headers",
      "language": "python"
    },
    {
      "code": "from typing import Annotated, Union\n\nfrom fastapi import FastAPI, Header\nfrom pydantic import BaseModel\n\napp = FastAPI()\n\n\nclass CommonHeaders(BaseModel):\n    model_config = {\"extra\": \"forbid\"}\n\n    host: str\n    save_data: bool\n    if_modified_since: Union[str, None] = None\n    traceparent: Union[str, None] = None\n    x_tag: list[str] = []\n\n\n@app.get(\"/items/\")\nasync def read_items(headers: Annotated[CommonHeaders, Header()]):\n    return headers",
      "language": "python"
    },
    {
      "code": "from typing import List, Union\n\nfrom fastapi import FastAPI, Header\nfrom pydantic import BaseModel\nfrom typing_extensions import Annotated\n\napp = FastAPI()\n\n\nclass CommonHeaders(BaseModel):\n    model_config = {\"extra\": \"forbid\"}\n\n    host: str\n    save_data: bool\n    if_modified_since: Union[str, None] = None\n    traceparent: Union[str, None] = None\n    x_tag: List[str] = []\n\n\n@app.get(\"/items/\")\nasync def read_items(headers: Annotated[CommonHeaders, Header()]):\n    return headers",
      "language": "python"
    },
    {
      "code": "from fastapi import FastAPI, Header\nfrom pydantic import BaseModel\n\napp = FastAPI()\n\n\nclass CommonHeaders(BaseModel):\n    model_config = {\"extra\": \"forbid\"}\n\n    host: str\n    save_data: bool\n    if_modified_since: str | None = None\n    traceparent: str | None = None\n    x_tag: list[str] = []\n\n\n@app.get(\"/items/\")\nasync def read_items(headers: CommonHeaders = Header()):\n    return headers",
      "language": "python"
    },
    {
      "code": "from typing import Union\n\nfrom fastapi import FastAPI, Header\nfrom pydantic import BaseModel\n\napp = FastAPI()\n\n\nclass CommonHeaders(BaseModel):\n    model_config = {\"extra\": \"forbid\"}\n\n    host: str\n    save_data: bool\n    if_modified_since: Union[str, None] = None\n    traceparent: Union[str, None] = None\n    x_tag: list[str] = []\n\n\n@app.get(\"/items/\")\nasync def read_items(headers: CommonHeaders = Header()):\n    return headers",
      "language": "python"
    },
    {
      "code": "from typing import List, Union\n\nfrom fastapi import FastAPI, Header\nfrom pydantic import BaseModel\n\napp = FastAPI()\n\n\nclass CommonHeaders(BaseModel):\n    model_config = {\"extra\": \"forbid\"}\n\n    host: str\n    save_data: bool\n    if_modified_since: Union[str, None] = None\n    traceparent: Union[str, None] = None\n    x_tag: List[str] = []\n\n\n@app.get(\"/items/\")\nasync def read_items(headers: CommonHeaders = Header()):\n    return headers",
      "language": "python"
    },
    {
      "code": "{\n    \"detail\": [\n        {\n            \"type\": \"extra_forbidden\",\n            \"loc\": [\"header\", \"tool\"],\n            \"msg\": \"Extra inputs are not permitted\",\n            \"input\": \"plumbus\",\n        }\n    ]\n}",
      "language": "unknown"
    },
    {
      "code": "from typing import Annotated\n\nfrom fastapi import FastAPI, Header\nfrom pydantic import BaseModel\n\napp = FastAPI()\n\n\nclass CommonHeaders(BaseModel):\n    host: str\n    save_data: bool\n    if_modified_since: str | None = None\n    traceparent: str | None = None\n    x_tag: list[str] = []\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    headers: Annotated[CommonHeaders, Header(convert_underscores=False)],\n):\n    return headers",
      "language": "python"
    },
    {
      "code": "from typing import Annotated, Union\n\nfrom fastapi import FastAPI, Header\nfrom pydantic import BaseModel\n\napp = FastAPI()\n\n\nclass CommonHeaders(BaseModel):\n    host: str\n    save_data: bool\n    if_modified_since: Union[str, None] = None\n    traceparent: Union[str, None] = None\n    x_tag: list[str] = []\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    headers: Annotated[CommonHeaders, Header(convert_underscores=False)],\n):\n    return headers",
      "language": "python"
    },
    {
      "code": "from typing import List, Union\n\nfrom fastapi import FastAPI, Header\nfrom pydantic import BaseModel\nfrom typing_extensions import Annotated\n\napp = FastAPI()\n\n\nclass CommonHeaders(BaseModel):\n    host: str\n    save_data: bool\n    if_modified_since: Union[str, None] = None\n    traceparent: Union[str, None] = None\n    x_tag: List[str] = []\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    headers: Annotated[CommonHeaders, Header(convert_underscores=False)],\n):\n    return headers",
      "language": "python"
    },
    {
      "code": "from fastapi import FastAPI, Header\nfrom pydantic import BaseModel\n\napp = FastAPI()\n\n\nclass CommonHeaders(BaseModel):\n    host: str\n    save_data: bool\n    if_modified_since: str | None = None\n    traceparent: str | None = None\n    x_tag: list[str] = []\n\n\n@app.get(\"/items/\")\nasync def read_items(headers: CommonHeaders = Header(convert_underscores=False)):\n    return headers",
      "language": "python"
    },
    {
      "code": "from typing import Union\n\nfrom fastapi import FastAPI, Header\nfrom pydantic import BaseModel\n\napp = FastAPI()\n\n\nclass CommonHeaders(BaseModel):\n    host: str\n    save_data: bool\n    if_modified_since: Union[str, None] = None\n    traceparent: Union[str, None] = None\n    x_tag: list[str] = []\n\n\n@app.get(\"/items/\")\nasync def read_items(headers: CommonHeaders = Header(convert_underscores=False)):\n    return headers",
      "language": "python"
    },
    {
      "code": "from typing import List, Union\n\nfrom fastapi import FastAPI, Header\nfrom pydantic import BaseModel\n\napp = FastAPI()\n\n\nclass CommonHeaders(BaseModel):\n    host: str\n    save_data: bool\n    if_modified_since: Union[str, None] = None\n    traceparent: Union[str, None] = None\n    x_tag: List[str] = []\n\n\n@app.get(\"/items/\")\nasync def read_items(headers: CommonHeaders = Header(convert_underscores=False)):\n    return headers",
      "language": "python"
    }
  ],
  "patterns": [],
  "links": [
    "https://fastapi.tiangolo.com/tutorial/header-param-models/"
  ]
}