{
  "url": "https://fastapi.tiangolo.com/tutorial/query-params-str-validations/",
  "title": "Query Parameters and String Validations¬∂",
  "content": "FastAPI allows you to declare additional information and validation for your parameters.\n\nLet's take this application as example:\n\nThe query parameter q is of type str | None, that means that it's of type str but could also be None, and indeed, the default value is None, so FastAPI will know it's not required.\n\nFastAPI will know that the value of q is not required because of the default value = None.\n\nHaving str | None will allow your editor to give you better support and detect errors.\n\nWe are going to enforce that even though q is optional, whenever it is provided, its length doesn't exceed 50 characters.\n\nTo achieve that, first import:\n\nPrefer to use the Annotated version if possible.\n\nPrefer to use the Annotated version if possible.\n\nFastAPI added support for Annotated (and started recommending it) in version 0.95.0.\n\nIf you have an older version, you would get errors when trying to use Annotated.\n\nMake sure you Upgrade the FastAPI version to at least 0.95.1 before using Annotated.\n\nRemember I told you before that Annotated can be used to add metadata to your parameters in the Python Types Intro?\n\nNow it's the time to use it with FastAPI. üöÄ\n\nWe had this type annotation:\n\nWhat we will do is wrap that with Annotated, so it becomes:\n\nBoth of those versions mean the same thing, q is a parameter that can be a str or None, and by default, it is None.\n\nNow let's jump to the fun stuff. üéâ\n\nNow that we have this Annotated where we can put more information (in this case some additional validation), add Query inside of Annotated, and set the parameter max_length to 50:\n\nPrefer to use the Annotated version if possible.\n\nPrefer to use the Annotated version if possible.\n\nNotice that the default value is still None, so the parameter is still optional.\n\nBut now, having Query(max_length=50) inside of Annotated, we are telling FastAPI that we want it to have additional validation for this value, we want it to have maximum 50 characters. üòé\n\nHere we are using Query() because this is a query parameter. Later we will see others like Path(), Body(), Header(), and Cookie(), that also accept the same arguments as Query().\n\nPrevious versions of FastAPI (before 0.95.0) required you to use Query as the default value of your parameter, instead of putting it in Annotated, there's a high chance that you will see code using it around, so I'll explain it to you.\n\nFor new code and whenever possible, use Annotated as explained above. There are multiple advantages (explained below) and no disadvantages. üç∞\n\nThis is how you would use Query() as the default value of your function parameter, setting the parameter max_length to 50:\n\nPrefer to use the Annotated version if possible.\n\nAs in this case (without using Annotated) we have to replace the default value None in the function with Query(), we now need to set the default value with the parameter Query(default=None), it serves the same purpose of defining that default value (at least for FastAPI).\n\n...makes the parameter optional, with a default value of None, the same as:\n\nBut the Query version declares it explicitly as being a query parameter.\n\nThen, we can pass more parameters to Query. In this case, the max_length parameter that applies to strings:\n\nThis will validate the data, show a clear error when the data is not valid, and document the parameter in the OpenAPI schema path operation.\n\nKeep in mind that when using Query inside of Annotated you cannot use the default parameter for Query.\n\nInstead, use the actual default value of the function parameter. Otherwise, it would be inconsistent.\n\nFor example, this is not allowed:\n\n...because it's not clear if the default value should be \"rick\" or \"morty\".\n\nSo, you would use (preferably):\n\n...or in older code bases you will find:\n\nUsing Annotated is recommended instead of the default value in function parameters, it is better for multiple reasons. ü§ì\n\nThe default value of the function parameter is the actual default value, that's more intuitive with Python in general. üòå\n\nYou could call that same function in other places without FastAPI, and it would work as expected. If there's a required parameter (without a default value), your editor will let you know with an error, Python will also complain if you run it without passing the required parameter.\n\nWhen you don't use Annotated and instead use the (old) default value style, if you call that function without FastAPI in other places, you have to remember to pass the arguments to the function for it to work correctly, otherwise the values will be different from what you expect (e.g. QueryInfo or something similar instead of str). And your editor won't complain, and Python won't complain running that function, only when the operations inside error out.\n\nBecause Annotated can have more than one metadata annotation, you could now even use the same function with other tools, like Typer. üöÄ\n\nYou can also add a parameter min_length:\n\nPrefer to use the Annotated version if possible.\n\nPrefer to use the Annotated version if possible.\n\nYou can define a regular expression pattern that the parameter should match:\n\nPrefer to use the Annotated version if possible.\n\nPrefer to use the Annotated version if possible.\n\nThis specific regular expression pattern checks that the received parameter value:\n\nIf you feel lost with all these \"regular expression\" ideas, don't worry. They are a hard topic for many people. You can still do a lot of stuff without needing regular expressions yet.\n\nNow you know that whenever you need them you can use them in FastAPI.\n\nBefore Pydantic version 2 and before FastAPI 0.100.0, the parameter was called regex instead of pattern, but it's now deprecated.\n\nYou could still see some code using it:\n\nBut know that this is deprecated and it should be updated to use the new parameter pattern. ü§ì\n\nYou can, of course, use default values other than None.\n\nLet's say that you want to declare the q query parameter to have a min_length of 3, and to have a default value of \"fixedquery\":\n\nPrefer to use the Annotated version if possible.\n\nHaving a default value of any type, including None, makes the parameter optional (not required).\n\nWhen we don't need to declare more validations or metadata, we can make the q query parameter required just by not declaring a default value, like:\n\nBut we are now declaring it with Query, for example like:\n\nSo, when you need to declare a value as required while using Query, you can simply not declare a default value:\n\nPrefer to use the Annotated version if possible.\n\nYou can declare that a parameter can accept None, but that it's still required. This would force clients to send a value, even if the value is None.\n\nTo do that, you can declare that None is a valid type but simply do not declare a default value:\n\nPrefer to use the Annotated version if possible.\n\nPrefer to use the Annotated version if possible.\n\nWhen you define a query parameter explicitly with Query you can also declare it to receive a list of values, or said in another way, to receive multiple values.\n\nFor example, to declare a query parameter q that can appear multiple times in the URL, you can write:\n\nPrefer to use the Annotated version if possible.\n\nPrefer to use the Annotated version if possible.\n\nPrefer to use the Annotated version if possible.\n\nThen, with a URL like:\n\nyou would receive the multiple q query parameters' values (foo and bar) in a Python list inside your path operation function, in the function parameter q.\n\nSo, the response to that URL would be:\n\nTo declare a query parameter with a type of list, like in the example above, you need to explicitly use Query, otherwise it would be interpreted as a request body.\n\nThe interactive API docs will update accordingly, to allow multiple values:\n\nYou can also define a default list of values if none are provided:\n\nPrefer to use the Annotated version if possible.\n\nPrefer to use the Annotated version if possible.\n\nthe default of q will be: [\"foo\", \"bar\"] and your response will be:\n\nYou can also use list directly instead of list[str]:\n\nPrefer to use the Annotated version if possible.\n\nKeep in mind that in this case, FastAPI won't check the contents of the list.\n\nFor example, list[int] would check (and document) that the contents of the list are integers. But list alone wouldn't.\n\nYou can add more information about the parameter.\n\nThat information will be included in the generated OpenAPI and used by the documentation user interfaces and external tools.\n\nKeep in mind that different tools might have different levels of OpenAPI support.\n\nSome of them might not show all the extra information declared yet, although in most of the cases, the missing feature is already planned for development.\n\nPrefer to use the Annotated version if possible.\n\nPrefer to use the Annotated version if possible.\n\nPrefer to use the Annotated version if possible.\n\nPrefer to use the Annotated version if possible.\n\nImagine that you want the parameter to be item-query.\n\nBut item-query is not a valid Python variable name.\n\nThe closest would be item_query.\n\nBut you still need it to be exactly item-query...\n\nThen you can declare an alias, and that alias is what will be used to find the parameter value:\n\nPrefer to use the Annotated version if possible.\n\nPrefer to use the Annotated version if possible.\n\nNow let's say you don't like this parameter anymore.\n\nYou have to leave it there a while because there are clients using it, but you want the docs to clearly show it as deprecated.\n\nThen pass the parameter deprecated=True to Query:\n\nPrefer to use the Annotated version if possible.\n\nPrefer to use the Annotated version if possible.\n\nThe docs will show it like this:\n\nTo exclude a query parameter from the generated OpenAPI schema (and thus, from the automatic documentation systems), set the parameter include_in_schema of Query to False:\n\nPrefer to use the Annotated version if possible.\n\nPrefer to use the Annotated version if possible.\n\nThere could be cases where you need to do some custom validation that can't be done with the parameters shown above.\n\nIn those cases, you can use a custom validator function that is applied after the normal validation (e.g. after validating that the value is a str).\n\nYou can achieve that using Pydantic's AfterValidator inside of Annotated.\n\nPydantic also has BeforeValidator and others. ü§ì\n\nFor example, this custom validator checks that the item ID starts with isbn- for an ISBN book number or with imdb- for an IMDB movie URL ID:\n\nThis is available with Pydantic version 2 or above. üòé\n\nIf you need to do any type of validation that requires communicating with any external component, like a database or another API, you should instead use FastAPI Dependencies, you will learn about them later.\n\nThese custom validators are for things that can be checked with only the same data provided in the request.\n\nThe important point is just using AfterValidator with a function inside Annotated. Feel free to skip this part. ü§∏\n\nBut if you're curious about this specific code example and you're still entertained, here are some extra details.\n\nDid you notice? a string using value.startswith() can take a tuple, and it will check each value in the tuple:\n\nWith data.items() we get an iterable object with tuples containing the key and value for each dictionary item.\n\nWe convert this iterable object into a proper list with list(data.items()).\n\nThen with random.choice() we can get a random value from the list, so, we get a tuple with (id, name). It will be something like (\"imdb-tt0371724\", \"The Hitchhiker's Guide to the Galaxy\").\n\nThen we assign those two values of the tuple to the variables id and name.\n\nSo, if the user didn't provide an item ID, they will still receive a random suggestion.\n\n...we do all this in a single simple line. ü§Ø Don't you love Python? üêç\n\nYou can declare additional validations and metadata for your parameters.\n\nGeneric validations and metadata:\n\nValidations specific for strings:\n\nCustom validations using AfterValidator.\n\nIn these examples you saw how to declare validations for str values.\n\nSee the next chapters to learn how to declare validations for other types, like numbers.",
  "headings": [
    {
      "level": "h1",
      "text": "Query Parameters and String Validations¬∂",
      "id": "query-parameters-and-string-validations"
    },
    {
      "level": "h2",
      "text": "Additional validation¬∂",
      "id": "additional-validation"
    },
    {
      "level": "h3",
      "text": "Import Query and Annotated¬∂",
      "id": "import-query-and-annotated"
    },
    {
      "level": "h2",
      "text": "Use Annotated in the type for the q parameter¬∂",
      "id": "use-annotated-in-the-type-for-the-q-parameter"
    },
    {
      "level": "h2",
      "text": "Add Query to Annotated in the q parameter¬∂",
      "id": "add-query-to-annotated-in-the-q-parameter"
    },
    {
      "level": "h2",
      "text": "Alternative (old): Query as the default value¬∂",
      "id": "alternative-old-query-as-the-default-value"
    },
    {
      "level": "h3",
      "text": "Query as the default value or in Annotated¬∂",
      "id": "query-as-the-default-value-or-in-annotated"
    },
    {
      "level": "h3",
      "text": "Advantages of Annotated¬∂",
      "id": "advantages-of-annotated"
    },
    {
      "level": "h2",
      "text": "Add more validations¬∂",
      "id": "add-more-validations"
    },
    {
      "level": "h2",
      "text": "Add regular expressions¬∂",
      "id": "add-regular-expressions"
    },
    {
      "level": "h3",
      "text": "Pydantic v1 regex instead of pattern¬∂",
      "id": "pydantic-v1-regex-instead-of-pattern"
    },
    {
      "level": "h2",
      "text": "Default values¬∂",
      "id": "default-values"
    },
    {
      "level": "h2",
      "text": "Required parameters¬∂",
      "id": "required-parameters"
    },
    {
      "level": "h3",
      "text": "Required, can be None¬∂",
      "id": "required-can-be-none"
    },
    {
      "level": "h2",
      "text": "Query parameter list / multiple values¬∂",
      "id": "query-parameter-list-multiple-values"
    },
    {
      "level": "h3",
      "text": "Query parameter list / multiple values with defaults¬∂",
      "id": "query-parameter-list-multiple-values-with-defaults"
    },
    {
      "level": "h4",
      "text": "Using just list¬∂",
      "id": "using-just-list"
    },
    {
      "level": "h2",
      "text": "Declare more metadata¬∂",
      "id": "declare-more-metadata"
    },
    {
      "level": "h2",
      "text": "Alias parameters¬∂",
      "id": "alias-parameters"
    },
    {
      "level": "h2",
      "text": "Deprecating parameters¬∂",
      "id": "deprecating-parameters"
    },
    {
      "level": "h2",
      "text": "Exclude parameters from OpenAPI¬∂",
      "id": "exclude-parameters-from-openapi"
    },
    {
      "level": "h2",
      "text": "Custom Validation¬∂",
      "id": "custom-validation"
    },
    {
      "level": "h3",
      "text": "Understand that Code¬∂",
      "id": "understand-that-code"
    },
    {
      "level": "h4",
      "text": "String with value.startswith()¬∂",
      "id": "string-with-value-startswith"
    },
    {
      "level": "h4",
      "text": "A Random Item¬∂",
      "id": "a-random-item"
    },
    {
      "level": "h2",
      "text": "Recap¬∂",
      "id": "recap"
    }
  ],
  "code_samples": [
    {
      "code": "from fastapi import FastAPI\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: str | None = None):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from typing import Union\n\nfrom fastapi import FastAPI\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: Union[str, None] = None):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from typing import Annotated\n\nfrom fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: Annotated[str | None, Query(max_length=50)] = None):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from typing import Union\n\nfrom fastapi import FastAPI, Query\nfrom typing_extensions import Annotated\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: Annotated[Union[str, None], Query(max_length=50)] = None):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: str | None = Query(default=None, max_length=50)):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from typing import Union\n\nfrom fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: Union[str, None] = Query(default=None, max_length=50)):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "q: str | None = None",
      "language": "unknown"
    },
    {
      "code": "q: Union[str, None] = None",
      "language": "unknown"
    },
    {
      "code": "q: Annotated[str | None] = None",
      "language": "unknown"
    },
    {
      "code": "q: Annotated[Union[str, None]] = None",
      "language": "unknown"
    },
    {
      "code": "from typing import Annotated\n\nfrom fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: Annotated[str | None, Query(max_length=50)] = None):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from typing import Union\n\nfrom fastapi import FastAPI, Query\nfrom typing_extensions import Annotated\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: Annotated[Union[str, None], Query(max_length=50)] = None):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: str | None = Query(default=None, max_length=50)):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from typing import Union\n\nfrom fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: Union[str, None] = Query(default=None, max_length=50)):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: str | None = Query(default=None, max_length=50)):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from typing import Annotated\n\nfrom fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: Annotated[str | None, Query(max_length=50)] = None):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from typing import Union\n\nfrom fastapi import FastAPI, Query\nfrom typing_extensions import Annotated\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: Annotated[Union[str, None], Query(max_length=50)] = None):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from typing import Union\n\nfrom fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: Union[str, None] = Query(default=None, max_length=50)):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "q: str | None = Query(default=None)",
      "language": "unknown"
    },
    {
      "code": "q: str | None = None",
      "language": "unknown"
    },
    {
      "code": "q: str | None = Query(default=None, max_length=50)",
      "language": "unknown"
    },
    {
      "code": "q: Annotated[str, Query(default=\"rick\")] = \"morty\"",
      "language": "unknown"
    },
    {
      "code": "q: Annotated[str, Query()] = \"rick\"",
      "language": "unknown"
    },
    {
      "code": "q: str = Query(default=\"rick\")",
      "language": "unknown"
    },
    {
      "code": "from typing import Annotated\n\nfrom fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    q: Annotated[str | None, Query(min_length=3, max_length=50)] = None,\n):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from typing import Annotated, Union\n\nfrom fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    q: Annotated[Union[str, None], Query(min_length=3, max_length=50)] = None,\n):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from typing import Union\n\nfrom fastapi import FastAPI, Query\nfrom typing_extensions import Annotated\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    q: Annotated[Union[str, None], Query(min_length=3, max_length=50)] = None,\n):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: str | None = Query(default=None, min_length=3, max_length=50)):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from typing import Union\n\nfrom fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    q: Union[str, None] = Query(default=None, min_length=3, max_length=50),\n):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from typing import Annotated\n\nfrom fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    q: Annotated[\n        str | None, Query(min_length=3, max_length=50, pattern=\"^fixedquery$\")\n    ] = None,\n):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from typing import Annotated, Union\n\nfrom fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    q: Annotated[\n        Union[str, None], Query(min_length=3, max_length=50, pattern=\"^fixedquery$\")\n    ] = None,\n):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from typing import Union\n\nfrom fastapi import FastAPI, Query\nfrom typing_extensions import Annotated\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    q: Annotated[\n        Union[str, None], Query(min_length=3, max_length=50, pattern=\"^fixedquery$\")\n    ] = None,\n):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    q: str | None = Query(\n        default=None, min_length=3, max_length=50, pattern=\"^fixedquery$\"\n    ),\n):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from typing import Union\n\nfrom fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    q: Union[str, None] = Query(\n        default=None, min_length=3, max_length=50, pattern=\"^fixedquery$\"\n    ),\n):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from typing import Annotated\n\nfrom fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    q: Annotated[\n        str | None, Query(min_length=3, max_length=50, regex=\"^fixedquery$\")\n    ] = None,\n):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from typing import Annotated\n\nfrom fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: Annotated[str, Query(min_length=3)] = \"fixedquery\"):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from fastapi import FastAPI, Query\nfrom typing_extensions import Annotated\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: Annotated[str, Query(min_length=3)] = \"fixedquery\"):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: str = Query(default=\"fixedquery\", min_length=3)):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "q: str | None = None",
      "language": "unknown"
    },
    {
      "code": "q: Annotated[str | None, Query(min_length=3)] = None",
      "language": "unknown"
    },
    {
      "code": "from typing import Annotated\n\nfrom fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: Annotated[str, Query(min_length=3)]):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from fastapi import FastAPI, Query\nfrom typing_extensions import Annotated\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: Annotated[str, Query(min_length=3)]):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: str = Query(min_length=3)):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from typing import Annotated\n\nfrom fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: Annotated[str | None, Query(min_length=3)]):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from typing import Annotated, Union\n\nfrom fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: Annotated[Union[str, None], Query(min_length=3)]):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from typing import Union\n\nfrom fastapi import FastAPI, Query\nfrom typing_extensions import Annotated\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: Annotated[Union[str, None], Query(min_length=3)]):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: str | None = Query(min_length=3)):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from typing import Union\n\nfrom fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: Union[str, None] = Query(min_length=3)):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from typing import Annotated\n\nfrom fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: Annotated[list[str] | None, Query()] = None):\n    query_items = {\"q\": q}\n    return query_items",
      "language": "python"
    },
    {
      "code": "from typing import Annotated, Union\n\nfrom fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: Annotated[Union[list[str], None], Query()] = None):\n    query_items = {\"q\": q}\n    return query_items",
      "language": "python"
    },
    {
      "code": "from typing import List, Union\n\nfrom fastapi import FastAPI, Query\nfrom typing_extensions import Annotated\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: Annotated[Union[List[str], None], Query()] = None):\n    query_items = {\"q\": q}\n    return query_items",
      "language": "python"
    },
    {
      "code": "from fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: list[str] | None = Query(default=None)):\n    query_items = {\"q\": q}\n    return query_items",
      "language": "python"
    },
    {
      "code": "from typing import Union\n\nfrom fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: Union[list[str], None] = Query(default=None)):\n    query_items = {\"q\": q}\n    return query_items",
      "language": "python"
    },
    {
      "code": "from typing import List, Union\n\nfrom fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: Union[List[str], None] = Query(default=None)):\n    query_items = {\"q\": q}\n    return query_items",
      "language": "python"
    },
    {
      "code": "http://localhost:8000/items/?q=foo&q=bar",
      "language": "unknown"
    },
    {
      "code": "{\n  \"q\": [\n    \"foo\",\n    \"bar\"\n  ]\n}",
      "language": "unknown"
    },
    {
      "code": "from typing import Annotated\n\nfrom fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: Annotated[list[str], Query()] = [\"foo\", \"bar\"]):\n    query_items = {\"q\": q}\n    return query_items",
      "language": "python"
    },
    {
      "code": "from typing import List\n\nfrom fastapi import FastAPI, Query\nfrom typing_extensions import Annotated\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: Annotated[List[str], Query()] = [\"foo\", \"bar\"]):\n    query_items = {\"q\": q}\n    return query_items",
      "language": "python"
    },
    {
      "code": "from fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: list[str] = Query(default=[\"foo\", \"bar\"])):\n    query_items = {\"q\": q}\n    return query_items",
      "language": "python"
    },
    {
      "code": "from typing import List\n\nfrom fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: List[str] = Query(default=[\"foo\", \"bar\"])):\n    query_items = {\"q\": q}\n    return query_items",
      "language": "python"
    },
    {
      "code": "http://localhost:8000/items/",
      "language": "unknown"
    },
    {
      "code": "{\n  \"q\": [\n    \"foo\",\n    \"bar\"\n  ]\n}",
      "language": "unknown"
    },
    {
      "code": "from typing import Annotated\n\nfrom fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: Annotated[list, Query()] = []):\n    query_items = {\"q\": q}\n    return query_items",
      "language": "python"
    },
    {
      "code": "from fastapi import FastAPI, Query\nfrom typing_extensions import Annotated\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: Annotated[list, Query()] = []):\n    query_items = {\"q\": q}\n    return query_items",
      "language": "python"
    },
    {
      "code": "from fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: list = Query(default=[])):\n    query_items = {\"q\": q}\n    return query_items",
      "language": "python"
    },
    {
      "code": "from typing import Annotated\n\nfrom fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    q: Annotated[str | None, Query(title=\"Query string\", min_length=3)] = None,\n):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from typing import Annotated, Union\n\nfrom fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    q: Annotated[Union[str, None], Query(title=\"Query string\", min_length=3)] = None,\n):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from typing import Union\n\nfrom fastapi import FastAPI, Query\nfrom typing_extensions import Annotated\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    q: Annotated[Union[str, None], Query(title=\"Query string\", min_length=3)] = None,\n):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    q: str | None = Query(default=None, title=\"Query string\", min_length=3),\n):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from typing import Union\n\nfrom fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    q: Union[str, None] = Query(default=None, title=\"Query string\", min_length=3),\n):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from typing import Annotated\n\nfrom fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    q: Annotated[\n        str | None,\n        Query(\n            title=\"Query string\",\n            description=\"Query string for the items to search in the database that have a good match\",\n            min_length=3,\n        ),\n    ] = None,\n):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from typing import Annotated, Union\n\nfrom fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    q: Annotated[\n        Union[str, None],\n        Query(\n            title=\"Query string\",\n            description=\"Query string for the items to search in the database that have a good match\",\n            min_length=3,\n        ),\n    ] = None,\n):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from typing import Union\n\nfrom fastapi import FastAPI, Query\nfrom typing_extensions import Annotated\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    q: Annotated[\n        Union[str, None],\n        Query(\n            title=\"Query string\",\n            description=\"Query string for the items to search in the database that have a good match\",\n            min_length=3,\n        ),\n    ] = None,\n):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    q: str | None = Query(\n        default=None,\n        title=\"Query string\",\n        description=\"Query string for the items to search in the database that have a good match\",\n        min_length=3,\n    ),\n):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from typing import Union\n\nfrom fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    q: Union[str, None] = Query(\n        default=None,\n        title=\"Query string\",\n        description=\"Query string for the items to search in the database that have a good match\",\n        min_length=3,\n    ),\n):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "http://127.0.0.1:8000/items/?item-query=foobaritems",
      "language": "unknown"
    },
    {
      "code": "from typing import Annotated\n\nfrom fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: Annotated[str | None, Query(alias=\"item-query\")] = None):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from typing import Annotated, Union\n\nfrom fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: Annotated[Union[str, None], Query(alias=\"item-query\")] = None):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from typing import Union\n\nfrom fastapi import FastAPI, Query\nfrom typing_extensions import Annotated\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: Annotated[Union[str, None], Query(alias=\"item-query\")] = None):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: str | None = Query(default=None, alias=\"item-query\")):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from typing import Union\n\nfrom fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: Union[str, None] = Query(default=None, alias=\"item-query\")):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from typing import Annotated\n\nfrom fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    q: Annotated[\n        str | None,\n        Query(\n            alias=\"item-query\",\n            title=\"Query string\",\n            description=\"Query string for the items to search in the database that have a good match\",\n            min_length=3,\n            max_length=50,\n            pattern=\"^fixedquery$\",\n            deprecated=True,\n        ),\n    ] = None,\n):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from typing import Annotated, Union\n\nfrom fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    q: Annotated[\n        Union[str, None],\n        Query(\n            alias=\"item-query\",\n            title=\"Query string\",\n            description=\"Query string for the items to search in the database that have a good match\",\n            min_length=3,\n            max_length=50,\n            pattern=\"^fixedquery$\",\n            deprecated=True,\n        ),\n    ] = None,\n):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from typing import Union\n\nfrom fastapi import FastAPI, Query\nfrom typing_extensions import Annotated\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    q: Annotated[\n        Union[str, None],\n        Query(\n            alias=\"item-query\",\n            title=\"Query string\",\n            description=\"Query string for the items to search in the database that have a good match\",\n            min_length=3,\n            max_length=50,\n            pattern=\"^fixedquery$\",\n            deprecated=True,\n        ),\n    ] = None,\n):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    q: str | None = Query(\n        default=None,\n        alias=\"item-query\",\n        title=\"Query string\",\n        description=\"Query string for the items to search in the database that have a good match\",\n        min_length=3,\n        max_length=50,\n        pattern=\"^fixedquery$\",\n        deprecated=True,\n    ),\n):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from typing import Union\n\nfrom fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    q: Union[str, None] = Query(\n        default=None,\n        alias=\"item-query\",\n        title=\"Query string\",\n        description=\"Query string for the items to search in the database that have a good match\",\n        min_length=3,\n        max_length=50,\n        pattern=\"^fixedquery$\",\n        deprecated=True,\n    ),\n):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results",
      "language": "python"
    },
    {
      "code": "from typing import Annotated\n\nfrom fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    hidden_query: Annotated[str | None, Query(include_in_schema=False)] = None,\n):\n    if hidden_query:\n        return {\"hidden_query\": hidden_query}\n    else:\n        return {\"hidden_query\": \"Not found\"}",
      "language": "python"
    },
    {
      "code": "from typing import Annotated, Union\n\nfrom fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    hidden_query: Annotated[Union[str, None], Query(include_in_schema=False)] = None,\n):\n    if hidden_query:\n        return {\"hidden_query\": hidden_query}\n    else:\n        return {\"hidden_query\": \"Not found\"}",
      "language": "python"
    },
    {
      "code": "from typing import Union\n\nfrom fastapi import FastAPI, Query\nfrom typing_extensions import Annotated\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    hidden_query: Annotated[Union[str, None], Query(include_in_schema=False)] = None,\n):\n    if hidden_query:\n        return {\"hidden_query\": hidden_query}\n    else:\n        return {\"hidden_query\": \"Not found\"}",
      "language": "python"
    },
    {
      "code": "from fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    hidden_query: str | None = Query(default=None, include_in_schema=False),\n):\n    if hidden_query:\n        return {\"hidden_query\": hidden_query}\n    else:\n        return {\"hidden_query\": \"Not found\"}",
      "language": "python"
    },
    {
      "code": "from typing import Union\n\nfrom fastapi import FastAPI, Query\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    hidden_query: Union[str, None] = Query(default=None, include_in_schema=False),\n):\n    if hidden_query:\n        return {\"hidden_query\": hidden_query}\n    else:\n        return {\"hidden_query\": \"Not found\"}",
      "language": "python"
    },
    {
      "code": "import random\nfrom typing import Annotated\n\nfrom fastapi import FastAPI\nfrom pydantic import AfterValidator\n\napp = FastAPI()\n\ndata = {\n    \"isbn-9781529046137\": \"The Hitchhiker's Guide to the Galaxy\",\n    \"imdb-tt0371724\": \"The Hitchhiker's Guide to the Galaxy\",\n    \"isbn-9781439512982\": \"Isaac Asimov: The Complete Stories, Vol. 2\",\n}\n\n\ndef check_valid_id(id: str):\n    if not id.startswith((\"isbn-\", \"imdb-\")):\n        raise ValueError('Invalid ID format, it must start with \"isbn-\" or \"imdb-\"')\n    return id\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    id: Annotated[str | None, AfterValidator(check_valid_id)] = None,\n):\n    if id:\n        item = data.get(id)\n    else:\n        id, item = random.choice(list(data.items()))\n    return {\"id\": id, \"name\": item}",
      "language": "python"
    },
    {
      "code": "import random\nfrom typing import Annotated, Union\n\nfrom fastapi import FastAPI\nfrom pydantic import AfterValidator\n\napp = FastAPI()\n\ndata = {\n    \"isbn-9781529046137\": \"The Hitchhiker's Guide to the Galaxy\",\n    \"imdb-tt0371724\": \"The Hitchhiker's Guide to the Galaxy\",\n    \"isbn-9781439512982\": \"Isaac Asimov: The Complete Stories, Vol. 2\",\n}\n\n\ndef check_valid_id(id: str):\n    if not id.startswith((\"isbn-\", \"imdb-\")):\n        raise ValueError('Invalid ID format, it must start with \"isbn-\" or \"imdb-\"')\n    return id\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    id: Annotated[Union[str, None], AfterValidator(check_valid_id)] = None,\n):\n    if id:\n        item = data.get(id)\n    else:\n        id, item = random.choice(list(data.items()))\n    return {\"id\": id, \"name\": item}",
      "language": "python"
    },
    {
      "code": "import random\nfrom typing import Union\n\nfrom fastapi import FastAPI\nfrom pydantic import AfterValidator\nfrom typing_extensions import Annotated\n\napp = FastAPI()\n\ndata = {\n    \"isbn-9781529046137\": \"The Hitchhiker's Guide to the Galaxy\",\n    \"imdb-tt0371724\": \"The Hitchhiker's Guide to the Galaxy\",\n    \"isbn-9781439512982\": \"Isaac Asimov: The Complete Stories, Vol. 2\",\n}\n\n\ndef check_valid_id(id: str):\n    if not id.startswith((\"isbn-\", \"imdb-\")):\n        raise ValueError('Invalid ID format, it must start with \"isbn-\" or \"imdb-\"')\n    return id\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    id: Annotated[Union[str, None], AfterValidator(check_valid_id)] = None,\n):\n    if id:\n        item = data.get(id)\n    else:\n        id, item = random.choice(list(data.items()))\n    return {\"id\": id, \"name\": item}",
      "language": "python"
    },
    {
      "code": "# Code above omitted üëÜ\n\ndef check_valid_id(id: str):\n    if not id.startswith((\"isbn-\", \"imdb-\")):\n        raise ValueError('Invalid ID format, it must start with \"isbn-\" or \"imdb-\"')\n    return id\n\n# Code below omitted üëá",
      "language": "python"
    },
    {
      "code": "import random\nfrom typing import Annotated\n\nfrom fastapi import FastAPI\nfrom pydantic import AfterValidator\n\napp = FastAPI()\n\ndata = {\n    \"isbn-9781529046137\": \"The Hitchhiker's Guide to the Galaxy\",\n    \"imdb-tt0371724\": \"The Hitchhiker's Guide to the Galaxy\",\n    \"isbn-9781439512982\": \"Isaac Asimov: The Complete Stories, Vol. 2\",\n}\n\n\ndef check_valid_id(id: str):\n    if not id.startswith((\"isbn-\", \"imdb-\")):\n        raise ValueError('Invalid ID format, it must start with \"isbn-\" or \"imdb-\"')\n    return id\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    id: Annotated[str | None, AfterValidator(check_valid_id)] = None,\n):\n    if id:\n        item = data.get(id)\n    else:\n        id, item = random.choice(list(data.items()))\n    return {\"id\": id, \"name\": item}",
      "language": "python"
    },
    {
      "code": "import random\nfrom typing import Annotated, Union\n\nfrom fastapi import FastAPI\nfrom pydantic import AfterValidator\n\napp = FastAPI()\n\ndata = {\n    \"isbn-9781529046137\": \"The Hitchhiker's Guide to the Galaxy\",\n    \"imdb-tt0371724\": \"The Hitchhiker's Guide to the Galaxy\",\n    \"isbn-9781439512982\": \"Isaac Asimov: The Complete Stories, Vol. 2\",\n}\n\n\ndef check_valid_id(id: str):\n    if not id.startswith((\"isbn-\", \"imdb-\")):\n        raise ValueError('Invalid ID format, it must start with \"isbn-\" or \"imdb-\"')\n    return id\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    id: Annotated[Union[str, None], AfterValidator(check_valid_id)] = None,\n):\n    if id:\n        item = data.get(id)\n    else:\n        id, item = random.choice(list(data.items()))\n    return {\"id\": id, \"name\": item}",
      "language": "python"
    },
    {
      "code": "import random\nfrom typing import Union\n\nfrom fastapi import FastAPI\nfrom pydantic import AfterValidator\nfrom typing_extensions import Annotated\n\napp = FastAPI()\n\ndata = {\n    \"isbn-9781529046137\": \"The Hitchhiker's Guide to the Galaxy\",\n    \"imdb-tt0371724\": \"The Hitchhiker's Guide to the Galaxy\",\n    \"isbn-9781439512982\": \"Isaac Asimov: The Complete Stories, Vol. 2\",\n}\n\n\ndef check_valid_id(id: str):\n    if not id.startswith((\"isbn-\", \"imdb-\")):\n        raise ValueError('Invalid ID format, it must start with \"isbn-\" or \"imdb-\"')\n    return id\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    id: Annotated[Union[str, None], AfterValidator(check_valid_id)] = None,\n):\n    if id:\n        item = data.get(id)\n    else:\n        id, item = random.choice(list(data.items()))\n    return {\"id\": id, \"name\": item}",
      "language": "python"
    },
    {
      "code": "# Code above omitted üëÜ\n\n@app.get(\"/items/\")\nasync def read_items(\n    id: Annotated[str | None, AfterValidator(check_valid_id)] = None,\n):\n    if id:\n        item = data.get(id)\n    else:\n        id, item = random.choice(list(data.items()))\n    return {\"id\": id, \"name\": item}",
      "language": "python"
    },
    {
      "code": "import random\nfrom typing import Annotated\n\nfrom fastapi import FastAPI\nfrom pydantic import AfterValidator\n\napp = FastAPI()\n\ndata = {\n    \"isbn-9781529046137\": \"The Hitchhiker's Guide to the Galaxy\",\n    \"imdb-tt0371724\": \"The Hitchhiker's Guide to the Galaxy\",\n    \"isbn-9781439512982\": \"Isaac Asimov: The Complete Stories, Vol. 2\",\n}\n\n\ndef check_valid_id(id: str):\n    if not id.startswith((\"isbn-\", \"imdb-\")):\n        raise ValueError('Invalid ID format, it must start with \"isbn-\" or \"imdb-\"')\n    return id\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    id: Annotated[str | None, AfterValidator(check_valid_id)] = None,\n):\n    if id:\n        item = data.get(id)\n    else:\n        id, item = random.choice(list(data.items()))\n    return {\"id\": id, \"name\": item}",
      "language": "python"
    },
    {
      "code": "import random\nfrom typing import Annotated, Union\n\nfrom fastapi import FastAPI\nfrom pydantic import AfterValidator\n\napp = FastAPI()\n\ndata = {\n    \"isbn-9781529046137\": \"The Hitchhiker's Guide to the Galaxy\",\n    \"imdb-tt0371724\": \"The Hitchhiker's Guide to the Galaxy\",\n    \"isbn-9781439512982\": \"Isaac Asimov: The Complete Stories, Vol. 2\",\n}\n\n\ndef check_valid_id(id: str):\n    if not id.startswith((\"isbn-\", \"imdb-\")):\n        raise ValueError('Invalid ID format, it must start with \"isbn-\" or \"imdb-\"')\n    return id\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    id: Annotated[Union[str, None], AfterValidator(check_valid_id)] = None,\n):\n    if id:\n        item = data.get(id)\n    else:\n        id, item = random.choice(list(data.items()))\n    return {\"id\": id, \"name\": item}",
      "language": "python"
    },
    {
      "code": "import random\nfrom typing import Union\n\nfrom fastapi import FastAPI\nfrom pydantic import AfterValidator\nfrom typing_extensions import Annotated\n\napp = FastAPI()\n\ndata = {\n    \"isbn-9781529046137\": \"The Hitchhiker's Guide to the Galaxy\",\n    \"imdb-tt0371724\": \"The Hitchhiker's Guide to the Galaxy\",\n    \"isbn-9781439512982\": \"Isaac Asimov: The Complete Stories, Vol. 2\",\n}\n\n\ndef check_valid_id(id: str):\n    if not id.startswith((\"isbn-\", \"imdb-\")):\n        raise ValueError('Invalid ID format, it must start with \"isbn-\" or \"imdb-\"')\n    return id\n\n\n@app.get(\"/items/\")\nasync def read_items(\n    id: Annotated[Union[str, None], AfterValidator(check_valid_id)] = None,\n):\n    if id:\n        item = data.get(id)\n    else:\n        id, item = random.choice(list(data.items()))\n    return {\"id\": id, \"name\": item}",
      "language": "python"
    }
  ],
  "patterns": [
    {
      "description": "Let's take this application as example:",
      "code": "from fastapi import FastAPI\n\napp = FastAPI()\n\n\n@app.get(\"/items/\")\nasync def read_items(q: str | None = None):\n    results = {\"items\": [{\"item_id\": \"Foo\"}, {\"item_id\": \"Bar\"}]}\n    if q:\n        results.update({\"q\": q})\n    return results"
    }
  ],
  "links": [
    "https://fastapi.tiangolo.com/tutorial/query-params-str-validations/",
    "https://fastapi.tiangolo.com/deployment/versions/",
    "https://fastapi.tiangolo.com/python-types/"
  ]
}