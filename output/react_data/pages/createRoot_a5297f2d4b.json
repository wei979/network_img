{
  "url": "https://react.dev/reference/react-dom/client/createRoot",
  "title": "createRoot",
  "content": "createRoot lets you create a root to display React components inside a browser DOM node.\n\nCall createRoot to create a React root for displaying content inside a browser DOM element.\n\nReact will create a root for the domNode, and take over managing the DOM inside it. After you‚Äôve created a root, you need to call root.render to display a React component inside of it:\n\nAn app fully built with React will usually only have one createRoot call for its root component. A page that uses ‚Äúsprinkles‚Äù of React for parts of the page may have as many separate roots as needed.\n\nSee more examples below.\n\ndomNode: A DOM element. React will create a root for this DOM element and allow you to call functions on the root, such as render to display rendered React content.\n\noptional options: An object with options for this React root.\n\ncreateRoot returns an object with two methods: render and unmount.\n\nCall root.render to display a piece of JSX (‚ÄúReact node‚Äù) into the React root‚Äôs browser DOM node.\n\nReact will display <App /> in the root, and take over managing the DOM inside it.\n\nSee more examples below.\n\nroot.render returns undefined.\n\nThe first time you call root.render, React will clear all the existing HTML content inside the React root before rendering the React component into it.\n\nIf your root‚Äôs DOM node contains HTML generated by React on the server or during the build, use hydrateRoot() instead, which attaches the event handlers to the existing HTML.\n\nIf you call render on the same root more than once, React will update the DOM as necessary to reflect the latest JSX you passed. React will decide which parts of the DOM can be reused and which need to be recreated by ‚Äúmatching it up‚Äù with the previously rendered tree. Calling render on the same root again is similar to calling the set function on the root component: React avoids unnecessary DOM updates.\n\nAlthough rendering is synchronous once it starts, root.render(...) is not. This means code after root.render() may run before any effects (useLayoutEffect, useEffect) of that specific render are fired. This is usually fine and rarely needs adjustment. In rare cases where effect timing matters, you can wrap root.render(...) in flushSync to ensure the initial render runs fully synchronously.\n\nCall root.unmount to destroy a rendered tree inside a React root.\n\nAn app fully built with React will usually not have any calls to root.unmount.\n\nThis is mostly useful if your React root‚Äôs DOM node (or any of its ancestors) may get removed from the DOM by some other code. For example, imagine a jQuery tab panel that removes inactive tabs from the DOM. If a tab gets removed, everything inside it (including the React roots inside) would get removed from the DOM as well. In that case, you need to tell React to ‚Äústop‚Äù managing the removed root‚Äôs content by calling root.unmount. Otherwise, the components inside the removed root won‚Äôt know to clean up and free up global resources like subscriptions.\n\nCalling root.unmount will unmount all the components in the root and ‚Äúdetach‚Äù React from the root DOM node, including removing any event handlers or state in the tree.\n\nroot.unmount does not accept any parameters.\n\nroot.unmount returns undefined.\n\nCalling root.unmount will unmount all the components in the tree and ‚Äúdetach‚Äù React from the root DOM node.\n\nOnce you call root.unmount you cannot call root.render again on the same root. Attempting to call root.render on an unmounted root will throw a ‚ÄúCannot update an unmounted root‚Äù error. However, you can create a new root for the same DOM node after the previous root for that node has been unmounted.\n\nIf your app is fully built with React, create a single root for your entire app.\n\nUsually, you only need to run this code once at startup. It will:\n\nIf your app is fully built with React, you shouldn‚Äôt need to create any more roots, or to call root.render again.\n\nFrom this point on, React will manage the DOM of your entire app. To add more components, nest them inside the App component. When you need to update the UI, each of your components can do this by using state. When you need to display extra content like a modal or a tooltip outside the DOM node, render it with a portal.\n\nWhen your HTML is empty, the user sees a blank page until the app‚Äôs JavaScript code loads and runs:\n\nThis can feel very slow! To solve this, you can generate the initial HTML from your components on the server or during the build. Then your visitors can read text, see images, and click links before any of the JavaScript code loads. We recommend using a framework that does this optimization out of the box. Depending on when it runs, this is called server-side rendering (SSR) or static site generation (SSG).\n\nApps using server rendering or static generation must call hydrateRoot instead of createRoot. React will then hydrate (reuse) the DOM nodes from your HTML instead of destroying and re-creating them.\n\nIf your page isn‚Äôt fully built with React, you can call createRoot multiple times to create a root for each top-level piece of UI managed by React. You can display different content in each root by calling root.render.\n\nHere, two different React components are rendered into two DOM nodes defined in the index.html file:\n\nYou could also create a new DOM node with document.createElement() and add it to the document manually.\n\nTo remove the React tree from the DOM node and clean up all the resources used by it, call root.unmount.\n\nThis is mostly useful if your React components are inside an app written in a different framework.\n\nYou can call render more than once on the same root. As long as the component tree structure matches up with what was previously rendered, React will preserve the state. Notice how you can type in the input, which means that the updates from repeated render calls every second in this example are not destructive:\n\nIt is uncommon to call render multiple times. Usually, your components will update state instead.\n\nBy default, React will log all errors to the console. To implement your own error reporting, you can provide the optional error handler root options onUncaughtError, onCaughtError and onRecoverableError:\n\nThe onCaughtError option is a function called with two arguments:\n\nTogether with onUncaughtError and onRecoverableError, you can can implement your own error reporting system:\n\nMake sure you haven‚Äôt forgotten to actually render your app into the root:\n\nUntil you do that, nothing is displayed.\n\nA common mistake is to pass the options for createRoot to root.render(...):\n\nTo fix, pass the root options to createRoot(...), not root.render(...):\n\nThis error means that whatever you‚Äôre passing to createRoot is not a DOM node.\n\nIf you‚Äôre not sure what‚Äôs happening, try logging it:\n\nFor example, if domNode is null, it means that getElementById returned null. This will happen if there is no node in the document with the given ID at the time of your call. There may be a few reasons for it:\n\nAnother common way to get this error is to write createRoot(<App />) instead of createRoot(domNode).\n\nThis error means that whatever you‚Äôre passing to root.render is not a React component.\n\nThis may happen if you call root.render with Component instead of <Component />:\n\nOr if you pass a function to root.render, instead of the result of calling it:\n\nIf your app is server-rendered and includes the initial HTML generated by React, you might notice that creating a root and calling root.render deletes all that HTML, and then re-creates all the DOM nodes from scratch. This can be slower, resets focus and scroll positions, and may lose other user input.\n\nServer-rendered apps must use hydrateRoot instead of createRoot:\n\nNote that its API is different. In particular, usually there will be no further root.render call.",
  "headings": [
    {
      "level": "h1",
      "text": "createRoot",
      "id": ""
    },
    {
      "level": "h2",
      "text": "Reference",
      "id": "reference"
    },
    {
      "level": "h3",
      "text": "createRoot(domNode, options?)",
      "id": "createroot"
    },
    {
      "level": "h4",
      "text": "Parameters",
      "id": "parameters"
    },
    {
      "level": "h4",
      "text": "Returns",
      "id": "returns"
    },
    {
      "level": "h4",
      "text": "Caveats",
      "id": "caveats"
    },
    {
      "level": "h3",
      "text": "root.render(reactNode)",
      "id": "root-render"
    },
    {
      "level": "h4",
      "text": "Parameters",
      "id": "root-render-parameters"
    },
    {
      "level": "h4",
      "text": "Returns",
      "id": "root-render-returns"
    },
    {
      "level": "h4",
      "text": "Caveats",
      "id": "root-render-caveats"
    },
    {
      "level": "h3",
      "text": "root.unmount()",
      "id": "root-unmount"
    },
    {
      "level": "h4",
      "text": "Parameters",
      "id": "root-unmount-parameters"
    },
    {
      "level": "h4",
      "text": "Returns",
      "id": "root-unmount-returns"
    },
    {
      "level": "h4",
      "text": "Caveats",
      "id": "root-unmount-caveats"
    },
    {
      "level": "h2",
      "text": "Usage",
      "id": "usage"
    },
    {
      "level": "h3",
      "text": "Rendering an app fully built with React",
      "id": "rendering-an-app-fully-built-with-react"
    },
    {
      "level": "h3",
      "text": "Note",
      "id": ""
    },
    {
      "level": "h3",
      "text": "Pitfall",
      "id": ""
    },
    {
      "level": "h3",
      "text": "Rendering a page partially built with React",
      "id": "rendering-a-page-partially-built-with-react"
    },
    {
      "level": "h3",
      "text": "Updating a root component",
      "id": "updating-a-root-component"
    },
    {
      "level": "h3",
      "text": "Error logging in production",
      "id": "error-logging-in-production"
    },
    {
      "level": "h2",
      "text": "Troubleshooting",
      "id": "troubleshooting"
    },
    {
      "level": "h3",
      "text": "I‚Äôve created a root, but nothing is displayed",
      "id": "ive-created-a-root-but-nothing-is-displayed"
    },
    {
      "level": "h3",
      "text": "I‚Äôm getting an error: ‚ÄúYou passed a second argument to root.render‚Äù",
      "id": "im-getting-an-error-you-passed-a-second-argument-to-root-render"
    },
    {
      "level": "h3",
      "text": "I‚Äôm getting an error: ‚ÄúTarget container is not a DOM element‚Äù",
      "id": "im-getting-an-error-target-container-is-not-a-dom-element"
    },
    {
      "level": "h3",
      "text": "I‚Äôm getting an error: ‚ÄúFunctions are not valid as a React child.‚Äù",
      "id": "im-getting-an-error-functions-are-not-valid-as-a-react-child"
    },
    {
      "level": "h3",
      "text": "My server-rendered HTML gets re-created from scratch",
      "id": "my-server-rendered-html-gets-re-created-from-scratch"
    }
  ],
  "code_samples": [
    {
      "code": "const root = createRoot(domNode, options?)",
      "language": "javascript"
    },
    {
      "code": "import { createRoot } from 'react-dom/client';const domNode = document.getElementById('root');const root = createRoot(domNode);",
      "language": "python"
    },
    {
      "code": "root.render(<App />);",
      "language": "unknown"
    },
    {
      "code": "root.render(<App />);",
      "language": "unknown"
    },
    {
      "code": "const root = createRoot(document.getElementById('root'));root.render(<App />);// üö© The HTML will not include the rendered <App /> yet:console.log(document.body.innerHTML);",
      "language": "javascript"
    },
    {
      "code": "root.unmount();",
      "language": "unknown"
    },
    {
      "code": "import { createRoot } from 'react-dom/client';const root = createRoot(document.getElementById('root'));root.render(<App />);",
      "language": "python"
    },
    {
      "code": "<div id=\"root\"></div>",
      "language": "unknown"
    },
    {
      "code": "const domNode = document.createElement('div');const root = createRoot(domNode); root.render(<Comment />);document.body.appendChild(domNode); // You can add it anywhere in the document",
      "language": "javascript"
    },
    {
      "code": "root.unmount();",
      "language": "unknown"
    },
    {
      "code": "import { createRoot } from \"react-dom/client\";import { reportCaughtError } from \"./reportError\";const container = document.getElementById(\"root\");const root = createRoot(container, {  onCaughtError: (error, errorInfo) => {    if (error.message !== \"Known error\") {      reportCaughtError({        error,        componentStack: errorInfo.componentStack,      });    }  },});",
      "language": "python"
    },
    {
      "code": "import { createRoot } from 'react-dom/client';import App from './App.js';const root = createRoot(document.getElementById('root'));root.render(<App />);",
      "language": "python"
    },
    {
      "code": "// üö© Wrong: root.render only takes one argument.root.render(App, {onUncaughtError});// ‚úÖ Correct: pass options to createRoot.const root = createRoot(container, {onUncaughtError}); root.render(<App />);",
      "language": "javascript"
    },
    {
      "code": "const domNode = document.getElementById('root');console.log(domNode); // ???const root = createRoot(domNode);root.render(<App />);",
      "language": "javascript"
    },
    {
      "code": "// üö© Wrong: App is a function, not a Component.root.render(App);// ‚úÖ Correct: <App /> is a component.root.render(<App />);",
      "language": "unknown"
    },
    {
      "code": "// üö© Wrong: createApp is a function, not a component.root.render(createApp);// ‚úÖ Correct: call createApp to return a component.root.render(createApp());",
      "language": "unknown"
    },
    {
      "code": "import { hydrateRoot } from 'react-dom/client';import App from './App.js';hydrateRoot(  document.getElementById('root'),  <App />);",
      "language": "python"
    }
  ],
  "patterns": [],
  "links": [
    "https://react.dev/reference/react",
    "https://react.dev/reference/react-dom/client",
    "https://react.dev/reference/react-dom/client/createRoot",
    "https://react.dev/reference/react/useId",
    "https://react.dev/reference/react-dom/client/hydrateRoot",
    "https://react.dev/reference/react-dom/createPortal",
    "https://react.dev/learn/writing-markup-with-jsx",
    "https://react.dev/reference/react/createElement",
    "https://react.dev/learn/preserving-and-resetting-state",
    "https://react.dev/reference/react/useState",
    "https://react.dev/reference/react-dom/flushSync",
    "https://react.dev/learn/importing-and-exporting-components",
    "https://react.dev/reference/react-dom/server",
    "https://react.dev/learn/start-a-new-react-project",
    "https://react.dev/learn/add-react-to-an-existing-project"
  ]
}