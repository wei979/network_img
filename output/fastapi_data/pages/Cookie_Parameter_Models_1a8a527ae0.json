{
  "url": "https://fastapi.tiangolo.com/tutorial/cookie-param-models/",
  "title": "Cookie Parameter Models¬∂",
  "content": "If you have a group of cookies that are related, you can create a Pydantic model to declare them. üç™\n\nThis would allow you to re-use the model in multiple places and also to declare validations and metadata for all the parameters at once. üòé\n\nThis is supported since FastAPI version 0.115.0. ü§ì\n\nThis same technique applies to Query, Cookie, and Header. üòé\n\nDeclare the cookie parameters that you need in a Pydantic model, and then declare the parameter as Cookie:\n\nPrefer to use the Annotated version if possible.\n\nPrefer to use the Annotated version if possible.\n\nFastAPI will extract the data for each field from the cookies received in the request and give you the Pydantic model you defined.\n\nYou can see the defined cookies in the docs UI at /docs:\n\nHave in mind that, as browsers handle cookies in special ways and behind the scenes, they don't easily allow JavaScript to touch them.\n\nIf you go to the API docs UI at /docs you will be able to see the documentation for cookies for your path operations.\n\nBut even if you fill the data and click \"Execute\", because the docs UI works with JavaScript, the cookies won't be sent, and you will see an error message as if you didn't write any values.\n\nIn some special use cases (probably not very common), you might want to restrict the cookies that you want to receive.\n\nYour API now has the power to control its own cookie consent. ü§™üç™\n\nYou can use Pydantic's model configuration to forbid any extra fields:\n\nPrefer to use the Annotated version if possible.\n\nPrefer to use the Annotated version if possible.\n\nIf a client tries to send some extra cookies, they will receive an error response.\n\nPoor cookie banners with all their effort to get your consent for the API to reject it. üç™\n\nFor example, if the client tries to send a santa_tracker cookie with a value of good-list-please, the client will receive an error response telling them that the santa_tracker cookie is not allowed:\n\nYou can use Pydantic models to declare cookies in FastAPI. üòé",
  "headings": [
    {
      "level": "h1",
      "text": "Cookie Parameter Models¬∂",
      "id": "cookie-parameter-models"
    },
    {
      "level": "h2",
      "text": "Cookies with a Pydantic Model¬∂",
      "id": "cookies-with-a-pydantic-model"
    },
    {
      "level": "h2",
      "text": "Check the Docs¬∂",
      "id": "check-the-docs"
    },
    {
      "level": "h2",
      "text": "Forbid Extra Cookies¬∂",
      "id": "forbid-extra-cookies"
    },
    {
      "level": "h2",
      "text": "Summary¬∂",
      "id": "summary"
    }
  ],
  "code_samples": [
    {
      "code": "from typing import Annotated\n\nfrom fastapi import Cookie, FastAPI\nfrom pydantic import BaseModel\n\napp = FastAPI()\n\n\nclass Cookies(BaseModel):\n    session_id: str\n    fatebook_tracker: str | None = None\n    googall_tracker: str | None = None\n\n\n@app.get(\"/items/\")\nasync def read_items(cookies: Annotated[Cookies, Cookie()]):\n    return cookies",
      "language": "python"
    },
    {
      "code": "from typing import Annotated, Union\n\nfrom fastapi import Cookie, FastAPI\nfrom pydantic import BaseModel\n\napp = FastAPI()\n\n\nclass Cookies(BaseModel):\n    session_id: str\n    fatebook_tracker: Union[str, None] = None\n    googall_tracker: Union[str, None] = None\n\n\n@app.get(\"/items/\")\nasync def read_items(cookies: Annotated[Cookies, Cookie()]):\n    return cookies",
      "language": "python"
    },
    {
      "code": "from typing import Union\n\nfrom fastapi import Cookie, FastAPI\nfrom pydantic import BaseModel\nfrom typing_extensions import Annotated\n\napp = FastAPI()\n\n\nclass Cookies(BaseModel):\n    session_id: str\n    fatebook_tracker: Union[str, None] = None\n    googall_tracker: Union[str, None] = None\n\n\n@app.get(\"/items/\")\nasync def read_items(cookies: Annotated[Cookies, Cookie()]):\n    return cookies",
      "language": "python"
    },
    {
      "code": "from fastapi import Cookie, FastAPI\nfrom pydantic import BaseModel\n\napp = FastAPI()\n\n\nclass Cookies(BaseModel):\n    session_id: str\n    fatebook_tracker: str | None = None\n    googall_tracker: str | None = None\n\n\n@app.get(\"/items/\")\nasync def read_items(cookies: Cookies = Cookie()):\n    return cookies",
      "language": "python"
    },
    {
      "code": "from typing import Union\n\nfrom fastapi import Cookie, FastAPI\nfrom pydantic import BaseModel\n\napp = FastAPI()\n\n\nclass Cookies(BaseModel):\n    session_id: str\n    fatebook_tracker: Union[str, None] = None\n    googall_tracker: Union[str, None] = None\n\n\n@app.get(\"/items/\")\nasync def read_items(cookies: Cookies = Cookie()):\n    return cookies",
      "language": "python"
    },
    {
      "code": "from typing import Annotated, Union\n\nfrom fastapi import Cookie, FastAPI\nfrom pydantic import BaseModel\n\napp = FastAPI()\n\n\nclass Cookies(BaseModel):\n    model_config = {\"extra\": \"forbid\"}\n\n    session_id: str\n    fatebook_tracker: Union[str, None] = None\n    googall_tracker: Union[str, None] = None\n\n\n@app.get(\"/items/\")\nasync def read_items(cookies: Annotated[Cookies, Cookie()]):\n    return cookies",
      "language": "python"
    },
    {
      "code": "from typing import Annotated\n\nfrom fastapi import Cookie, FastAPI\nfrom pydantic import BaseModel\n\napp = FastAPI()\n\n\nclass Cookies(BaseModel):\n    model_config = {\"extra\": \"forbid\"}\n\n    session_id: str\n    fatebook_tracker: str | None = None\n    googall_tracker: str | None = None\n\n\n@app.get(\"/items/\")\nasync def read_items(cookies: Annotated[Cookies, Cookie()]):\n    return cookies",
      "language": "python"
    },
    {
      "code": "from typing import Union\n\nfrom fastapi import Cookie, FastAPI\nfrom pydantic import BaseModel\nfrom typing_extensions import Annotated\n\napp = FastAPI()\n\n\nclass Cookies(BaseModel):\n    model_config = {\"extra\": \"forbid\"}\n\n    session_id: str\n    fatebook_tracker: Union[str, None] = None\n    googall_tracker: Union[str, None] = None\n\n\n@app.get(\"/items/\")\nasync def read_items(cookies: Annotated[Cookies, Cookie()]):\n    return cookies",
      "language": "python"
    },
    {
      "code": "from fastapi import Cookie, FastAPI\nfrom pydantic import BaseModel\n\napp = FastAPI()\n\n\nclass Cookies(BaseModel):\n    model_config = {\"extra\": \"forbid\"}\n\n    session_id: str\n    fatebook_tracker: str | None = None\n    googall_tracker: str | None = None\n\n\n@app.get(\"/items/\")\nasync def read_items(cookies: Cookies = Cookie()):\n    return cookies",
      "language": "python"
    },
    {
      "code": "from typing import Union\n\nfrom fastapi import Cookie, FastAPI\nfrom pydantic import BaseModel\n\napp = FastAPI()\n\n\nclass Cookies(BaseModel):\n    model_config = {\"extra\": \"forbid\"}\n\n    session_id: str\n    fatebook_tracker: Union[str, None] = None\n    googall_tracker: Union[str, None] = None\n\n\n@app.get(\"/items/\")\nasync def read_items(cookies: Cookies = Cookie()):\n    return cookies",
      "language": "python"
    },
    {
      "code": "{\n    \"detail\": [\n        {\n            \"type\": \"extra_forbidden\",\n            \"loc\": [\"cookie\", \"santa_tracker\"],\n            \"msg\": \"Extra inputs are not permitted\",\n            \"input\": \"good-list-please\",\n        }\n    ]\n}",
      "language": "unknown"
    }
  ],
  "patterns": [],
  "links": [
    "https://fastapi.tiangolo.com/tutorial/cookie-param-models/"
  ]
}