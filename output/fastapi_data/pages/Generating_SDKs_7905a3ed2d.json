{
  "url": "https://fastapi.tiangolo.com/advanced/generate-clients/",
  "title": "Generating SDKsÂ¶",
  "content": "Because FastAPI is based on the OpenAPI specification, its APIs can be described in a standard format that many tools understand.\n\nThis makes it easy to generate up-to-date documentation, client libraries (SDKs) in multiple languages, and testing or automation workflows that stay in sync with your code.\n\nIn this guide, you'll learn how to generate a TypeScript SDK for your FastAPI backend.\n\nA versatile option is the OpenAPI Generator, which supports many programming languages and can generate SDKs from your OpenAPI specification.\n\nFor TypeScript clients, Hey API is a purpose-built solution, providing an optimized experience for the TypeScript ecosystem.\n\nYou can discover more SDK generators on OpenAPI.Tools.\n\nFastAPI automatically generates OpenAPI 3.1 specifications, so any tool you use must support this version.\n\nThis section highlights venture-backed and company-supported solutions from companies that sponsor FastAPI. These products provide additional features and integrations on top of high-quality generated SDKs.\n\nBy âœ¨ sponsoring FastAPI âœ¨, these companies help ensure the framework and its ecosystem remain healthy and sustainable.\n\nTheir sponsorship also demonstrates a strong commitment to the FastAPI community (you), showing that they care not only about offering a great service but also about supporting a robust and thriving framework, FastAPI. ðŸ™‡\n\nFor example, you might want to try:\n\nSome of these solutions may also be open source or offer free tiers, so you can try them without a financial commitment. Other commercial SDK generators are available and can be found online. ðŸ¤“\n\nLet's start with a simple FastAPI application:\n\nNotice that the path operations define the models they use for request payload and response payload, using the models Item and ResponseMessage.\n\nIf you go to /docs, you will see that it has the schemas for the data to be sent in requests and received in responses:\n\nYou can see those schemas because they were declared with the models in the app.\n\nThat information is available in the app's OpenAPI schema, and then shown in the API docs.\n\nThat same information from the models that is included in OpenAPI is what can be used to generate the client code.\n\nOnce we have a FastAPI app with the models, we can use Hey API to generate a TypeScript client. The fastest way to do that is via npx.\n\nThis will generate a TypeScript SDK in ./src/client.\n\nYou can learn how to install @hey-api/openapi-ts and read about the generated output on their website.\n\nNow you can import and use the client code. It could look like this, notice that you get autocompletion for the methods:\n\nYou will also get autocompletion for the payload to send:\n\nNotice the autocompletion for name and price, that was defined in the FastAPI application, in the Item model.\n\nYou will have inline errors for the data that you send:\n\nThe response object will also have autocompletion:\n\nIn many cases, your FastAPI app will be bigger, and you will probably use tags to separate different groups of path operations.\n\nFor example, you could have a section for items and another section for users, and they could be separated by tags:\n\nIf you generate a client for a FastAPI app using tags, it will normally also separate the client code based on the tags.\n\nThis way, you will be able to have things ordered and grouped correctly for the client code:\n\nIn this case, you have:\n\nRight now, the generated method names like createItemItemsPost don't look very clean:\n\n...that's because the client generator uses the OpenAPI internal operation ID for each path operation.\n\nOpenAPI requires that each operation ID is unique across all the path operations, so FastAPI uses the function name, the path, and the HTTP method/operation to generate that operation ID, because that way it can make sure that the operation IDs are unique.\n\nBut I'll show you how to improve that next. ðŸ¤“\n\nYou can modify the way these operation IDs are generated to make them simpler and have simpler method names in the clients.\n\nIn this case, you will have to ensure that each operation ID is unique in some other way.\n\nFor example, you could make sure that each path operation has a tag, and then generate the operation ID based on the tag and the path operation name (the function name).\n\nFastAPI uses a unique ID for each path operation, which is used for the operation ID and also for the names of any needed custom models, for requests or responses.\n\nYou can customize that function. It takes an APIRoute and outputs a string.\n\nFor example, here it is using the first tag (you will probably have only one tag) and the path operation name (the function name).\n\nYou can then pass that custom function to FastAPI as the generate_unique_id_function parameter:\n\nNow, if you generate the client again, you will see that it has the improved method names:\n\nAs you see, the method names now have the tag and then the function name, now they don't include information from the URL path and the HTTP operation.\n\nThe generated code still has some duplicated information.\n\nWe already know that this method is related to the items because that word is in the ItemsService (taken from the tag), but we still have the tag name prefixed in the method name too. ðŸ˜•\n\nWe will probably still want to keep it for OpenAPI in general, as that will ensure that the operation IDs are unique.\n\nBut for the generated client, we could modify the OpenAPI operation IDs right before generating the clients, just to make those method names nicer and cleaner.\n\nWe could download the OpenAPI JSON to a file openapi.json and then we could remove that prefixed tag with a script like this:\n\nWith that, the operation IDs would be renamed from things like items-get_items to just get_items, that way the client generator can generate simpler method names.\n\nSince the end result is now in an openapi.json file, you need to update your input location:\n\nAfter generating the new client, you would now have clean method names, with all the autocompletion, inline errors, etc:\n\nWhen using the automatically generated clients, you would get autocompletion for:\n\nYou would also have inline errors for everything.\n\nAnd whenever you update the backend code, and regenerate the frontend, it would have any new path operations available as methods, the old ones removed, and any other change would be reflected on the generated code. ðŸ¤“\n\nThis also means that if something changed, it will be reflected on the client code automatically. And if you build the client, it will error out if you have any mismatch in the data used.\n\nSo, you would detect many errors very early in the development cycle instead of having to wait for the errors to show up to your final users in production and then trying to debug where the problem is. âœ¨",
  "headings": [
    {
      "level": "h1",
      "text": "Generating SDKsÂ¶",
      "id": "generating-sdks"
    },
    {
      "level": "h2",
      "text": "Open Source SDK GeneratorsÂ¶",
      "id": "open-source-sdk-generators"
    },
    {
      "level": "h2",
      "text": "SDK Generators from FastAPI SponsorsÂ¶",
      "id": "sdk-generators-from-fastapi-sponsors"
    },
    {
      "level": "h2",
      "text": "Create a TypeScript SDKÂ¶",
      "id": "create-a-typescript-sdk"
    },
    {
      "level": "h3",
      "text": "API DocsÂ¶",
      "id": "api-docs"
    },
    {
      "level": "h3",
      "text": "Hey APIÂ¶",
      "id": "hey-api"
    },
    {
      "level": "h3",
      "text": "Using the SDKÂ¶",
      "id": "using-the-sdk"
    },
    {
      "level": "h2",
      "text": "FastAPI App with TagsÂ¶",
      "id": "fastapi-app-with-tags"
    },
    {
      "level": "h3",
      "text": "Generate a TypeScript Client with TagsÂ¶",
      "id": "generate-a-typescript-client-with-tags"
    },
    {
      "level": "h3",
      "text": "Client Method NamesÂ¶",
      "id": "client-method-names"
    },
    {
      "level": "h2",
      "text": "Custom Operation IDs and Better Method NamesÂ¶",
      "id": "custom-operation-ids-and-better-method-names"
    },
    {
      "level": "h3",
      "text": "Custom Generate Unique ID FunctionÂ¶",
      "id": "custom-generate-unique-id-function"
    },
    {
      "level": "h3",
      "text": "Generate a TypeScript Client with Custom Operation IDsÂ¶",
      "id": "generate-a-typescript-client-with-custom-operation-ids"
    },
    {
      "level": "h3",
      "text": "Preprocess the OpenAPI Specification for the Client GeneratorÂ¶",
      "id": "preprocess-the-openapi-specification-for-the-client-generator"
    },
    {
      "level": "h3",
      "text": "Generate a TypeScript Client with the Preprocessed OpenAPIÂ¶",
      "id": "generate-a-typescript-client-with-the-preprocessed-openapi"
    },
    {
      "level": "h2",
      "text": "BenefitsÂ¶",
      "id": "benefits"
    }
  ],
  "code_samples": [
    {
      "code": "from fastapi import FastAPI\nfrom pydantic import BaseModel\n\napp = FastAPI()\n\n\nclass Item(BaseModel):\n    name: str\n    price: float\n\n\nclass ResponseMessage(BaseModel):\n    message: str\n\n\n@app.post(\"/items/\", response_model=ResponseMessage)\nasync def create_item(item: Item):\n    return {\"message\": \"item received\"}\n\n\n@app.get(\"/items/\", response_model=list[Item])\nasync def get_items():\n    return [\n        {\"name\": \"Plumbus\", \"price\": 3},\n        {\"name\": \"Portal Gun\", \"price\": 9001},\n    ]",
      "language": "python"
    },
    {
      "code": "from typing import List\n\nfrom fastapi import FastAPI\nfrom pydantic import BaseModel\n\napp = FastAPI()\n\n\nclass Item(BaseModel):\n    name: str\n    price: float\n\n\nclass ResponseMessage(BaseModel):\n    message: str\n\n\n@app.post(\"/items/\", response_model=ResponseMessage)\nasync def create_item(item: Item):\n    return {\"message\": \"item received\"}\n\n\n@app.get(\"/items/\", response_model=List[Item])\nasync def get_items():\n    return [\n        {\"name\": \"Plumbus\", \"price\": 3},\n        {\"name\": \"Portal Gun\", \"price\": 9001},\n    ]",
      "language": "python"
    },
    {
      "code": "npx @hey-api/openapi-ts -i http://localhost:8000/openapi.json -o src/client",
      "language": "unknown"
    },
    {
      "code": "from fastapi import FastAPI\nfrom pydantic import BaseModel\n\napp = FastAPI()\n\n\nclass Item(BaseModel):\n    name: str\n    price: float\n\n\nclass ResponseMessage(BaseModel):\n    message: str\n\n\nclass User(BaseModel):\n    username: str\n    email: str\n\n\n@app.post(\"/items/\", response_model=ResponseMessage, tags=[\"items\"])\nasync def create_item(item: Item):\n    return {\"message\": \"Item received\"}\n\n\n@app.get(\"/items/\", response_model=list[Item], tags=[\"items\"])\nasync def get_items():\n    return [\n        {\"name\": \"Plumbus\", \"price\": 3},\n        {\"name\": \"Portal Gun\", \"price\": 9001},\n    ]\n\n\n@app.post(\"/users/\", response_model=ResponseMessage, tags=[\"users\"])\nasync def create_user(user: User):\n    return {\"message\": \"User received\"}",
      "language": "python"
    },
    {
      "code": "from typing import List\n\nfrom fastapi import FastAPI\nfrom pydantic import BaseModel\n\napp = FastAPI()\n\n\nclass Item(BaseModel):\n    name: str\n    price: float\n\n\nclass ResponseMessage(BaseModel):\n    message: str\n\n\nclass User(BaseModel):\n    username: str\n    email: str\n\n\n@app.post(\"/items/\", response_model=ResponseMessage, tags=[\"items\"])\nasync def create_item(item: Item):\n    return {\"message\": \"Item received\"}\n\n\n@app.get(\"/items/\", response_model=List[Item], tags=[\"items\"])\nasync def get_items():\n    return [\n        {\"name\": \"Plumbus\", \"price\": 3},\n        {\"name\": \"Portal Gun\", \"price\": 9001},\n    ]\n\n\n@app.post(\"/users/\", response_model=ResponseMessage, tags=[\"users\"])\nasync def create_user(user: User):\n    return {\"message\": \"User received\"}",
      "language": "python"
    },
    {
      "code": "ItemsService.createItemItemsPost({name: \"Plumbus\", price: 5})",
      "language": "unknown"
    },
    {
      "code": "from fastapi import FastAPI\nfrom fastapi.routing import APIRoute\nfrom pydantic import BaseModel\n\n\ndef custom_generate_unique_id(route: APIRoute):\n    return f\"{route.tags[0]}-{route.name}\"\n\n\napp = FastAPI(generate_unique_id_function=custom_generate_unique_id)\n\n\nclass Item(BaseModel):\n    name: str\n    price: float\n\n\nclass ResponseMessage(BaseModel):\n    message: str\n\n\nclass User(BaseModel):\n    username: str\n    email: str\n\n\n@app.post(\"/items/\", response_model=ResponseMessage, tags=[\"items\"])\nasync def create_item(item: Item):\n    return {\"message\": \"Item received\"}\n\n\n@app.get(\"/items/\", response_model=list[Item], tags=[\"items\"])\nasync def get_items():\n    return [\n        {\"name\": \"Plumbus\", \"price\": 3},\n        {\"name\": \"Portal Gun\", \"price\": 9001},\n    ]\n\n\n@app.post(\"/users/\", response_model=ResponseMessage, tags=[\"users\"])\nasync def create_user(user: User):\n    return {\"message\": \"User received\"}",
      "language": "python"
    },
    {
      "code": "from typing import List\n\nfrom fastapi import FastAPI\nfrom fastapi.routing import APIRoute\nfrom pydantic import BaseModel\n\n\ndef custom_generate_unique_id(route: APIRoute):\n    return f\"{route.tags[0]}-{route.name}\"\n\n\napp = FastAPI(generate_unique_id_function=custom_generate_unique_id)\n\n\nclass Item(BaseModel):\n    name: str\n    price: float\n\n\nclass ResponseMessage(BaseModel):\n    message: str\n\n\nclass User(BaseModel):\n    username: str\n    email: str\n\n\n@app.post(\"/items/\", response_model=ResponseMessage, tags=[\"items\"])\nasync def create_item(item: Item):\n    return {\"message\": \"Item received\"}\n\n\n@app.get(\"/items/\", response_model=List[Item], tags=[\"items\"])\nasync def get_items():\n    return [\n        {\"name\": \"Plumbus\", \"price\": 3},\n        {\"name\": \"Portal Gun\", \"price\": 9001},\n    ]\n\n\n@app.post(\"/users/\", response_model=ResponseMessage, tags=[\"users\"])\nasync def create_user(user: User):\n    return {\"message\": \"User received\"}",
      "language": "python"
    },
    {
      "code": "import json\nfrom pathlib import Path\n\nfile_path = Path(\"./openapi.json\")\nopenapi_content = json.loads(file_path.read_text())\n\nfor path_data in openapi_content[\"paths\"].values():\n    for operation in path_data.values():\n        tag = operation[\"tags\"][0]\n        operation_id = operation[\"operationId\"]\n        to_remove = f\"{tag}-\"\n        new_operation_id = operation_id[len(to_remove) :]\n        operation[\"operationId\"] = new_operation_id\n\nfile_path.write_text(json.dumps(openapi_content))",
      "language": "python"
    },
    {
      "code": "import * as fs from 'fs'\n\nasync function modifyOpenAPIFile(filePath) {\n  try {\n    const data = await fs.promises.readFile(filePath)\n    const openapiContent = JSON.parse(data)\n\n    const paths = openapiContent.paths\n    for (const pathKey of Object.keys(paths)) {\n      const pathData = paths[pathKey]\n      for (const method of Object.keys(pathData)) {\n        const operation = pathData[method]\n        if (operation.tags && operation.tags.length > 0) {\n          const tag = operation.tags[0]\n          const operationId = operation.operationId\n          const toRemove = `${tag}-`\n          if (operationId.startsWith(toRemove)) {\n            const newOperationId = operationId.substring(toRemove.length)\n            operation.operationId = newOperationId\n          }\n        }\n      }\n    }\n\n    await fs.promises.writeFile(\n      filePath,\n      JSON.stringify(openapiContent, null, 2),\n    )\n    console.log('File successfully modified')\n  } catch (err) {\n    console.error('Error:', err)\n  }\n}\n\nconst filePath = './openapi.json'\nmodifyOpenAPIFile(filePath)",
      "language": "python"
    },
    {
      "code": "npx @hey-api/openapi-ts -i ./openapi.json -o src/client",
      "language": "unknown"
    }
  ],
  "patterns": [],
  "links": [
    "https://fastapi.tiangolo.com/advanced/generate-clients/",
    "https://fastapi.tiangolo.com/help-fastapi/"
  ]
}